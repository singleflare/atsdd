<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel='stylesheet' href='../player.css'>
  <title>Player 3</title>
</head>

<body oncontextmenu="return false;">
  <img src='../media/systemBallGrid.png' id='systemBallGridImg'>
  <div id='systemBallGrid'>
    <img src='../media/1.png' id='ball1' class='ball'>
    <img src='../media/2.png' id='ball2' class='ball'>
    <img src='../media/3.png' id='ball3' class='ball'>
    <img src='../media/4.png' id='ball4' class='ball'>
    <img src='../media/5.png' id='ball5' class='ball'>
    <img src='../media/6.png' id='ball6' class='ball'>
    <img src='../media/7.png' id='ball7' class='ball'>
    <img src='../media/8.png' id='ball8' class='ball'>
    <img src='../media/9.png' id='ball9' class='ball'>
    <img src='../media/10.png' id='ball10' class='ball'>
    <img src='../media/11.png' id='ball11' class='ball'>
    <img src='../media/12.png' id='ball12' class='ball'>
    <img src='../media/13.png' id='ball13' class='ball'>
    <img src='../media/14.png' id='ball14' class='ball'>
    <img src='../media/15.png' id='ball15' class='ball'>
    <img src='../media/16.png' id='ball16' class='ball'>
    <img src='../media/17.png' id='ball17' class='ball'>
    <img src='../media/18.png' id='ball18' class='ball'>
    <img src='../media/19.png' id='ball19' class='ball'>
    <img src='../media/20.png' id='ball20' class='ball'>
    <img src='../media/21.png' id='ball21' class='ball'>
    <img src='../media/22.png' id='ball22' class='ball'>
    <img src='../media/23.png' id='ball23' class='ball'>
    <img src='../media/24.png' id='ball24' class='ball'>
    <img src='../media/25.png' id='ball25' class='ball'>
    <img src='../media/26.png' id='ball26' class='ball'>
    <img src='../media/27.png' id='ball27' class='ball'>
    <img src='../media/28.png' id='ball28' class='ball'>
    <img src='../media/29.png' id='ball29' class='ball'>
    <img src='../media/30.png' id='ball30' class='ball'>
    <img src='../media/31.png' id='ball31' class='ball'>
    <img src='../media/32.png' id='ball32' class='ball'>
    <img src='../media/33.png' id='ball33' class='ball'>
    <img src='../media/34.png' id='ball34' class='ball'>
    <img src='../media/35.png' id='ball35' class='ball'>
    <img src='../media/36.png' id='ball36' class='ball'>
    <img src='../media/37.png' id='ball37' class='ball'>
    <img src='../media/38.png' id='ball38' class='ball'>
    <img src='../media/39.png' id='ball39' class='ball'>
    <img src='../media/40.png' id='ball40' class='ball'>
    <img src='../media/41.png' id='ball41' class='ball'>
    <img src='../media/42.png' id='ball42' class='ball'>
    <img src='../media/43.png' id='ball43' class='ball'>
    <img src='../media/44.png' id='ball44' class='ball'>
    <img src='../media/45.png' id='ball45' class='ball'>
    <img src='../media/46.png' id='ball46' class='ball'>
    <img src='../media/47.png' id='ball47' class='ball'>
    <img src='../media/48.png' id='ball48' class='ball'>
    <img src='../media/49.png' id='ball49' class='ball'>
    <img src='../media/50.png' id='ball50' class='ball'>
  </div>
  <div id='glows'>
    <img src='../media/glow2.png' id='glow1'>
    <img src='../media/glow2.png' id='glow2'>
    <img src='../media/glow2.png' id='glow3'>
    <img src='../media/glow2.png' id='glow4'>
    <img src='../media/glow2.png' id='glow5'>
    <img src='../media/glow2.png' id='glow6'>
    <img src='../media/glow2.png' id='glow7'>
    <img src='../media/glow2.png' id='glow8'>
    <img src='../media/glow2.png' id='glow9'>
    <img src='../media/glow2.png' id='glow10'>
    <img src='../media/glow2.png' id='glow11'>
    <img src='../media/glow2.png' id='glow12'>
    <img src='../media/glow2.png' id='glow13'>
    <img src='../media/glow2.png' id='glow14'>
    <img src='../media/glow2.png' id='glow15'>
    <img src='../media/glow2.png' id='glow16'>
    <img src='../media/glow2.png' id='glow17'>
    <img src='../media/glow2.png' id='glow18'>
    <img src='../media/glow2.png' id='glow19'>
    <img src='../media/glow2.png' id='glow20'>
    <img src='../media/glow2.png' id='glow21'>
    <img src='../media/glow2.png' id='glow22'>
    <img src='../media/glow2.png' id='glow23'>
    <img src='../media/glow2.png' id='glow24'>
    <img src='../media/glow2.png' id='glow25'>
    <img src='../media/glow2.png' id='glow26'>
    <img src='../media/glow2.png' id='glow27'>
    <img src='../media/glow2.png' id='glow28'>
    <img src='../media/glow2.png' id='glow29'>
    <img src='../media/glow2.png' id='glow30'>
    <img src='../media/glow2.png' id='glow31'>
    <img src='../media/glow2.png' id='glow32'>
    <img src='../media/glow2.png' id='glow33'>
    <img src='../media/glow2.png' id='glow34'>
    <img src='../media/glow2.png' id='glow35'>
    <img src='../media/glow2.png' id='glow36'>
    <img src='../media/glow2.png' id='glow37'>
    <img src='../media/glow2.png' id='glow38'>
    <img src='../media/glow2.png' id='glow39'>
    <img src='../media/glow2.png' id='glow40'>
    <img src='../media/glow2.png' id='glow41'>
    <img src='../media/glow2.png' id='glow42'>
    <img src='../media/glow2.png' id='glow43'>
    <img src='../media/glow2.png' id='glow44'>
    <img src='../media/glow2.png' id='glow45'>
    <img src='../media/glow2.png' id='glow46'>
    <img src='../media/glow2.png' id='glow47'>
    <img src='../media/glow2.png' id='glow48'>
    <img src='../media/glow2.png' id='glow49'>
    <img src='../media/glow2.png' id='glow50'>
  </div>
  <button class='idle' disabled style='pointer-events:initial;'>Chu√¥ng</button>
  <img src='../media/qPanePlayer.png' id='qPane'>
  <div id='qno'></div>
  <div id='question'></div>
  <div id='p1Area' class='pArea'>
    <div id='p1Name' class='name'></div>
    <div id='p1Jackpots' class='jackpot'></div>
    <div id='p1Score' class='score'></div>
    <img src='../media/playerBallsPodium.png' style='width: 100%;'>
    <div id='p1Balls' class='pBallsGrid'> </div>
  </div>
  <div id='p2Area' class='pArea'>
    <div id='p2Name' class='name'></div>
    <div id='p2Jackpots' class='jackpot'></div>
    <div id='p2Score' class='score'></div>
    <img src='../media/playerBallsPodium.png' style='width: 100%;'>
    <div id='p2Balls' class='pBallsGrid'></div>
  </div>
  <div id='p3Area' class='pArea'>
    <div id='p3Name' class='name'></div>
    <div id='p3Jackpots' class='jackpot'></div>
    <div id='p3Score' class='score'></div>
    <img src='../media/playerBallsPodium.png' style='width: 100%;'>
    <div id='p3Balls' class='pBallsGrid'></div>
  </div>

  <script src='../scripts/disableDevTools.js'></script>
  <script src='../scripts/jquery-3.7.1.min.js'></script>
  <script src='/socket.io/socket.io.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.core.min.js"
    integrity="sha512-d00Brs/+XQUUaO0Y9Uo8Vw63o7kS6ZcLM2P++17kALrI8oihAfL4pl1jQObeRBgv06j7xG0GHOhudAW0BdrycA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src='../scripts/playerGeneral.js'></script>
  <script>
    const socket = io('/p3')
    socket.on('resetBalls', () => {
      resetBalls()
    })
    $('button').on('click', () => {
      $('button').prop('disabled', true)
      socket.emit('p3Buzzed')
    })
    socket.on('buzzer', (mode) => {
      if (mode == 'open') {
        armBuzzer()
      }
      else if (mode == 'reset') {
        resetBuzzer()
      }
    })
    socket.on('buzzEarly', () => {
      buzzEarly()
    })
    socket.on('buzzLate', () => {
      buzzLate()
    })
    socket.on('updateBall', (mode, p, ball) => {
      updateBall(mode, p, ball)
    })
    socket.on('updateScore', (p, score) => {
      updateScore(p, score)
    })
    socket.on('updateJackpot', (mode, p, ball) => {
      updateJackpot(mode, p, ball)
    })
    socket.on('updateName', (p, name) => {
      updateName(p, name)
    })

    let sounds = [];
    socket.on('playMusic', (url) => {
      sound = new Howl({
        src: [url]
      })
      sound.play()
      sounds.push(sound)
      console.log(sounds)
    })
    socket.on('stopMusic', () => {
      sounds.forEach(sound => {
        sound.fade(1, 0, 1000)
        setTimeout(() => {
          sound.stop()
        }, 1000)
      })
      sounds = []
    })

    socket.on('qna', (qnas, qno) => {
      qna(qnas, qno)
    })
    socket.on('hideQ', () => {
      $('#question').css('display', 'none');
      $('#answer').css('display', 'none');
      $('#qno').css('display', 'none');
    })
    socket.on('showQ', () => {
      $('#question').css('display', 'initial');
      $('#answer').css('display', 'initial');
      $('#qno').css('display', 'initial');
    })
    socket.on('glowBall', (ball) => {
      $(`#glow` + ball).css('opacity', '1')
    })
    socket.on('delGlowBall', (ball) => {
      $(`#glow` + ball).css('opacity', '0')
    })
    socket.on('delAllGlowBall', () => {
      $(`#glows img`).css('opacity', '0')
    })

    socket.on('color', color => {
      changeBallColor(color)
    })
    socket.on('updateTime', (time) => {
      $('button').text(time)
    })
    socket.on('buzzerBtnText', (text) => {
      $('button').text('Buzzer')
    })
    socket.on('resetGame', () => {
      resetData()
    })
  </script>
</body>

</html>